<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Tra√ßabilit√© ‚Äì Neige Azur</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; padding: 15px; }
h1 { color:#003366 }

button { width:100%; padding:10px; margin:8px 0 }

.home-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:15px;
}

.home-card{
  padding:25px;
  text-align:center;
  border-radius:15px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  cursor:pointer;
}

section{ display:none }
</style>
</head>

<body>
 
<!-- ACCUEIL -->
<div id="home">
  <h1>Gestion des stocks</h1>

  <div class="home-grid">
    <div class="home-card" onclick="openSection('ajout')">‚ûï Ajout stock</div>
    <div class="home-card" onclick="openSection('stock')">üì¶ Stock</div>
    <div class="home-card" onclick="openSection('hist')">üßæ Historique</div>
    <div class="home-card" onclick="alert('Stats √† venir')">üìä Stats</div>
  </div>
</div>

<!-- APPLICATION -->
<div id="app">
  
<button onclick="retourAccueil()">üè† Accueil</button>

<!-- AJOUT -->
<section id="section-ajout">
<h2>Ajouter au stock</h2>

<input id="matiere" placeholder="Mati√®re">
<input id="fournisseur" placeholder="Fournisseur">
<input id="lot" placeholder="Lot">
<input id="dlc" type="date">
<input id="quantite" type="number" placeholder="Quantit√©">

<button onclick="ajouterLot()">Ajouter</button>
</section>
  
<div id="tab-stock" style="display:none;">

<h3>Stock actuel</h3>

<table>
<thead>
<tr>
<th>Mati√®re</th>
<th>Fournisseur</th>
<th>Lot</th>
<th>Date</th>
<th>Quantit√©</th>
<th>Sortie</th>
</tr>
</thead>
<tbody id="tableStock"></tbody>
</table>

<h3>Sorties du mois</h3>
<ul id="sortiesMoisListe"></ul>

</div>


<!-- HISTORIQUE -->
<section id="section-hist">
<h2>Historique des sorties</h2>
<ul id="tableHistorique"></ul>
</section>

</div>

<script>
let stock = [];
let historique = [];

function openSection(section){
  document.getElementById("home").style.display="none";
  document.getElementById("app").style.display="block";

  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  document.getElementById("section-"+section).style.display="block";
}

function retourAccueil(){
  document.getElementById("app").style.display="none";
  document.getElementById("home").style.display="block";
}

function ajouterLot(){
  const matiere = document.getElementById("matiere").value;
  const lot = document.getElementById("lot").value;
  const qte = Number(document.getElementById("quantite").value);

  if(!matiere || !qte) return;

  stock.push({matiere, lot, qte});
  afficherStock();
}

function afficherStock(){
  const tbody = document.getElementById("tableStock");
  tbody.innerHTML="";

  stock.forEach((s,i)=>{
    tbody.innerHTML += `
    <tr>
      <td>${s.matiere}</td>
      <td>${s.lot}</td>
      <td>${s.qte}</td>
      <td><button onclick="sortie(${i})">-1</button></td>
    </tr>`;
  });
}

function sortie(i){
  stock[i].qte--;
  historique.push(stock[i].matiere);
  afficherStock();
}
  function openSection(tab) {
  document.getElementById("home").style.display = "none";
  document.getElementById("app").style.display = "block";
  showTab(tab);
}

function retourAccueil() {
  document.getElementById("app").style.display = "none";
  document.getElementById("home").style.display = "block";
}

</script>
</div>

</body>
</html>
